<!doctype html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="description" content="$1"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Touchmove Tests</title><style>*,:after,:before{box-sizing:border-box}html,body{display:block;height:100%;font-size:16px}*{margin:0;padding:0}h1{margin:20px 0 15px;font-size:24px}h3{margin:15px 0 10px;font-size:18px}.card{width:100%;height:100%;text-align:center;padding:20px}.card1{background:#ddd}.card2{background:#23232e;color:#fff}.tip{background:rgba(0,0,0,.8);color:#fff;font-size:14px;padding:5px;position:fixed;bottom:0;left:0;width:100%;height:40px;line-height:40px;text-align:center}</style><script src="http://zeptojs.com/zepto.min.js"></script><body><div class="tip" id="tip"></div><div class="card card1"><h1>touchmove parallax</h1><img src="img/logo.png"></div><div class="card card2"><h3>card2</h3></div><script>!function(t,i){function e(t,i,e){var s;return function(){var n=this,r=arguments,o=function(){s=null,e||t.apply(n,r)},a=e&&!s;clearTimeout(s),s=setTimeout(o,i),a&&t.apply(n,r)}}var s=function(t,e){this.el=t,this.$el=i(t),this.opts=i.extend({},{preventDefault:!1,threshold:10,debounceDuration:100},e||{}),this.init()};s.prototype={init:function(){this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.distX=0,this.distY=0,this.initEvts()},initEvts:function(){var t=this,i=this.opts;this.el.addEventListener("touchstart",function(e){var s=e.changedTouches[0];t.startX=parseInt(s.clientX),t.startY=parseInt(s.clientY),i.preventDefault&&e.preventDefault()},!1),this.el.addEventListener("touchmove",e(function(e){var s=e.changedTouches[0];t.distX=parseInt(s.clientX)-t.startX,t.distY=parseInt(s.clientY)-t.startY,t.isSwipeUp()&&t.$el.trigger("stm:up",[t,-t.distY]),t.isSwipeDown()&&t.$el.trigger("stm:down",[t,t.distY]),t.isSwipeLeft()&&t.$el.trigger("stm:left",[t,-t.distX]),t.isSwipeRight()&&t.$el.trigger("stm:right",[t,t.distX]),i.preventDefault&&e.preventDefault()},i.debounceDuration),!1),this.el.addEventListener("touchend",function(e){var s=e.changedTouches[0];t.lastX=parseInt(s.clientX),t.lastY=parseInt(s.clientY),i.preventDefault&&e.preventDefault()},!1)},isSwipeV:function(){var t=this.opts,i=this,e=Math.abs(i.distY)-Math.abs(i.distX)>t.threshold;return e},isSwipeUp:function(){var t=this.isSwipeV()&&this.distY<0;return t},isSwipeDown:function(){var t=this.isSwipeV()&&this.distY>0;return t},isSwipeLeft:function(){var t=!this.isSwipeV()&&this.distX<0;return t},isSwipeRight:function(){var t=!this.isSwipeV()&&this.distX>0;return t},on:function(t,i){return this.$el.on(t,i),this}},t.SafeTouchmove=s}(window,Zepto);var $tip=$("#tip"),stmBody=new SafeTouchmove(document.body,{debounceDuration:10}).on("stm:up",function(t,i,e){$tip.html("stm:up "+e)}).on("stm:down",function(t,i,e){$tip.html("stm:down "+e)});</script>